## 文件系统
### 含义：
> 是计算机操作系统用于有效地`存储、组织和访问磁盘上的数据`的一种系统。它提供了用户与存储设备之间交互的接口，使得用户可以方便的存取文件和数据。
### 主要功能：
- `数据存储`：文件系统负责将数据存储到磁盘或其他存储设备上
- `数据组织`：通过目录(或文件夹)和文件来组织数据。目录可以包含文件和其他目录。形成树状结构，使得数据的管理和访问更加高效
- `数据访问`：提供创建、移动、删除和访问文件和目录的方法
- `权限和安全`：通过权限控制来管理对文件和目录的访问，确保只有授权用户才能访问特定数据
### 挂载
>- 操作系统可以将存储设备(如硬盘分区、USB驱动器、网络共享等)上的文件系统`挂载到目录树中的某个位置`，该位置称为`挂载点`
>- 一旦挂载，挂载点下的目录和文件就反映了文件系统的内容。
>- 这使得用户或应用程序可以轻松访问和存储数据，而无需关心数据的物理存储位置
### 根文件系统
#### 含义：
> 根文件系统是Linux系统启动时`挂载的第一个文件系统`,被内核挂载在层次结构的根目录上，由`/`标识。它包含了系统启动所需的基本文件目录、程序和配置信息。

#### 主要功能：
 - `提供文件和目录结构`：根文件系统提供了一种标准的方式来组织文件和目录
 - `启动初始化`：根文件系统包含系统启动所需的各种文件，如内核映像、初始化脚本(如Systemd、init脚本),设备文件等
 - `提供系统服务`：很多系统级服务都储存在根文件系统中，包括用于设备管理、日志记录、任务调度、进程管理等的系统工具
 - `用户数据保存`：根文件系统通常包含用户的主目录，用来保存用户的文件和配置数据
- `存储应用程序`：为安装的应用程序提供存储空间，大多数应用程序都将其可执行文件、库和其他相关文件存储在根文件系统的某个位置。
### initramfs-临时根文件系统
#### 含义：
> initramfs是一个经gzip压缩后的`cpio`格式的数据文件，存放在内存中。  
#### 功能：
> 在内核启动时将其提取到linux文件缓存中，进行解压，使用它作为`临时的根文件系统`，内核检查它是否包含一个"init"文件，若包含，则init程序作PID 1执行，负责将系统启动，包括定位和挂载真正的根文件系统。若没有找到init程序，内核将回退到较旧的代码来定位和挂载一个根分区，然后从该分区中执行某个版本/sbin/init

#### 根文件系统重要目录
|  目录 | 描述  |
| ----- |  ---  |
|/bin|存放系统最基本的用户命令和可执行文件|
|/boot|内核映像、配置和initramfs(仅当内核从文件系统加载时，在非x86架构上不常见)|
|/dev|存放设备与设备接口的文件。Linux将硬件设备表示为文件，通过读写这些设备文件来访问和控制硬件设备。|
|/etc|存放系统全局配置文件，如网络配置、用户账号信息等|
|/home|存放普通用户的个人目录，每个用户通常在这个目录下有一个以其用户名命名的子目录，用于存放用户的个人文件和配置。|
|/lib|存放系统运行时所需的共享库文件和内核模块，如动态链接库（.so文件）。|
|/media|可移动媒体的安装点|
|mnt|临时挂载的文件系统的挂载点|
|/proc|这是一个虚拟文件系统，里面的目录和文件由内核临时生成，用于表示系统的运行状态。|
|/root|系统管理员（root用户）的主目录|
|/run|/run目录是一个临时文件系统，用于存储系统启动或运行时需要保存的数据|
|/sbin|存放系统管理程序，如ifconfig、reboot等。这些命令通常只有系统管理员（root用户）才能使用。|
|/sys|sysfs虚拟文件系统的挂载点|
|/tmp|用于存放临时文件，系统和应用程序运行时会在这里创建临时文件|
|/usr|/usr/bin:包含了系统用户（非root用户）可以使用的命令和程序|
||/usr/lib:存放共享库文件|
||/usr/sbin:包含了系统管理员（root用户）才能使用的系统命令和程序|
|/var|用于存放系统运行过程中经常变化的文件和数据|

### VFS(虚拟文件系统)
- 在Linux系统中，VFS是内核中的一个软件层，用于给用户空间程序提供`统一的文件系统接口`，并`兼容不同的文件系统`在Linux系统中共存和协同工作  
- 给用户空间提供了一套统一的操作文件的系统调用接口 

### procfs
#### 含义
> proc文件系统是Linux内核的一部分，存储当前内核运行状态的一系列特殊文件，用户可以通过这些文件查看有关系统`硬件及当前正在运行进程的信息`，甚至可以通过`更改其中某些文件来改变内核的运行状态`。它是一个`虚拟文件系统`，只`存在于内存`中，不占用磁盘空间。
#### 常见文件与目录
|目录/文件|描述|
| --- | --- |
|/proc/cpuinfo|包含当前系统CPU的参数信息，如核心数量、工作频率、缓存大小等。|
|/proc/meminfo|显示系统中当前的内存状态信息，如物理内存总容量、已使用内存、空闲内存等。|
|/proc/kallsyms|包含内核的所有全局变量和函数在内存中的地址，用于内核开发者调试|
|/proc/interrupts|记录在每个CPU上处理的各类中断的计数信息|
|/proc/loadavg|显示系统在过去一段时间的平均负载|
|/proc/[pid]|系统中当前运行的每一个进程都有对应的一个目录在/proc下，以进程的PID号为目录名。这些目录包含了进程的详细信息，如打开的文件、内存映射、状态等|
### sysfs
#### 含义：
> - 是一种基于内存的文件系统,它挂载在根文件系统的/sys目录下
> - Linux内核提供的一种虚拟文件系统，它主要用于向用户空间`提供关于系统硬件设备和驱动程序的信息`。sysfs以文件和目录的形式呈现，用户可以通过读取和写入这些文件来与系统硬件进行交互和配置。
#### 常见目录
| 目录 |  描述 |
| ---  | ----  |
|/block|包含所有块设备的目录|
|/bus|包含所有总线的目录，每个总线下又包含连接到该总线的设备目录|
|/class|按照设备类型组织的目录，如net(网络设备)、sound(音频设备)等|
|/devices|包含系统中所有设备的目录|
|/drivers|包含所有驱动程序的目录|
|/firmware|包含固件信息的目录|
|/fs|包含文件系统信息的目录|
|/kernel|包含内核相关信息的目录|
|/module|包含已加载模块信息的目录|
|/power|包含电源管理相关信息的目录|

### 块文件系统(Block Filesystems)
#### 含义：
> 块文件系统（Block Filesystems）是一种`将文件数据存储在固定大小的块（Block）中`的文件系统。这些块是磁盘上连续的空间，用于存储文件内容和文件系统的元数据。

> - Block(块)：磁盘上固定大小的数据单元，用于存储文件数据。每个块的大小在文件系统创建时确定，通常为1kb、2kb、4kb等
> - Inode(索引节点)：存储文件元数据的结构，包括文件名、大小、创建时间、修改时间、权限等。每个文件或目录在Linux中都有一个对应的inode
> - Superblock(超级块)：存储文件系统的全局信息，如块的大小、数量、状态、节点数量等

#### 工作原理：
> 块文件系统通过inode和block来管理文件。当文件被创建时，文件系统会为其分配一个inode，并在inode中记录文件的元数据。文件的数据则存储在block中，inode中包含了指向这些block的指针。
#### 常见类型
- ext2：传统的Linux文件系统，不支持日志功能，断电后可能会损坏数据，恢复数据较为困难
- ext3：ext2的扩展版本，增加了日志功能，提高了数据安全性
- ext4：ext3的继任者，提供了更多的特性和改进，如更大的文件大小、更快的速度和更好的数据完整性
- XFS：由SGI开发的高性能文件系统，支持大文件、高并发和快速恢复
- btrfs：Btrfs是Linux内核中的一个较新的文件系统，旨在成为下一代的文件系统。它支持高级特性，如快照、透明压缩、校验和、子卷、动态inode分配等。Btrfs还具有良好的错误检测和修复能力，能够保护数据免受硬件故障的影响。




